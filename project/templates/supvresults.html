{% extends "bootstrap/base.html" %}
{% block scripts %}
  {{ super() }}
  <script>
  function checkAll() {
    let checkboxes = document.getElementsByClassName('checkbox')
    for(let i = 1; i < checkboxes.length; i++){ 
      checkboxes[i].checked = checkboxes[0].checked;
    } 
    checkboxes[0].checked = !checkall[0].checked;
  }

  function checkSelection(){
    let checkboxes = document.getElementsByClassName('checkbox')
    let allChecked = true
    for(let i = 1; i < checkboxes.length; i++){ 
      allChecked = (checkboxes[i].checked && allChecked);
    }
    if (allChecked){
      checkboxes[0].checked = true;
    }else{
      checkboxes[0].checked = false;
    }
  }
  </script>
{% endblock %}
{% block content %}
<div class="container">
<h3 class="pt-3">Search Results</h3>
  <form method="POST" id="EditForm" action="{{ url_for('supvedits') }}">
  <table class="table">
    <tr>
      <th class="center-align"><input type="checkbox" class="checkbox" name="checkall" onclick="checkAll()"></th>
      <th>Name</th>
      <th>Date</th>
      <th>Clock In</th>
      <th>Clock Out</th>
      <th>Holiday/PTO</th>
      <th>Hours</th>
      <th>Approval Status</th>
    </tr>
    {% for data in results %}
      <tr>
        <td class="center-align"><input type="checkbox" class="checkbox" name="selection" value="{{ data['id'] }}" onclick="checkSelection()"></td>
        <td>{{ data['name'] }}</td>
        <td>{{ data['date'] }}</td>
        <td>{{ data['clock_in'] }}</td>
        <td>{{ data['clock_out'] }}</td>
        <td>{{ data['pto'] }}</td>
        <td>{{ data['hours'] }}</td>
        <td>{{ data['approval'] }}</td>
      </tr>
  {% endfor %}

  </table>

  <p>Select what entries you would like to approve/unapprove above.</p>
  <div class="form-check form-check-inline">
    <label class="form-check-label"><input class="form-check-input" type="radio" name="choice" checked value="approve" required> Approve selection</label>
  </div>
  <div class="form-check form-check-inline">
    <label class="form-check-label"><input class="form-check-input" type="radio" name="choice" value="unapprove" required> Unapprove selection</label>
  </div>

  <div class="form-group">
    <p class="pt-3"><input class="btn btn-primary" type="submit" value="Submit Choice"></p>
  </div>
  </form>
<hr>
<p><a href="{{ url_for('supv') }}">Go back to the Supvervisor Hub</a></p>
<p><a href="{{ url_for('logout') }}">Logout</a></p>
<hr>
</div>
{% endblock %}
